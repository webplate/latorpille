<!DOCTYPE html>
<html lang="en">
<head>
    <title>La torpille</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <!-- Bootstrap -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link href="/static/css/general.css" rel="stylesheet">
    
    <script src="/static/js/general.js"></script>
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
<!--
    Where is the site ?
-->
    <script type="text/javascript">
    $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
    </script>
<!--
    Load content asynchronously
-->
    <script type="text/javascript">
      $(function() {
        var submit_form = function(e) {
          $.getJSON($SCRIPT_ROOT + '/_target', {
            target_url: $('input[name="target_url"]').val(),
          }, function(data) {
            $('#show_url').text(data.target_url);
            $('#information').text(data.info);
            //~ $('input[name=target_url]').focus().select();
          });
          return false;
        };

        $('a#calculate').bind('click', submit_form);

        $('input[name=target_url]').bind('keydown', function(e) {
          if (e.keyCode == 13) {
            submit_form(e);
          }
        });

        $('input[name=target_url]').focus();
      });
    </script>
</head>
<body>
    
<!--
    up Container
-->
    <div class="container" id="main">
    <div id="sub_main">
    
    
    <div class="row">
    <h2>URL to target</h2>
    <p>
        <label class="sr-only" for="new_user">URL :</label>
        <input class="form-control" type="text" name="target_url" id="target_url" placeholder="http://" maxlength="200" required/>
    </p>

    <a href=# class="btn btn-primary" id="calculate">Send url</a>
    
    </form>
    </div>
    
    <div class="row">
    <p id="show_url"></p>
    <p id="information"></p>
    </div>
    

    </div>
    

<!--
    Close down container
-->
    </div>
    
</body>
</html>
